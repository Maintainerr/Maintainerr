"use strict";exports.id=414,exports.ids=[414],exports.modules={203:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>m});var e=c(8732),f=c(2015),g=c(8281),h=c(1992),i=c(3928),j=c(654),k=c(3947),l=a([g]);g=(l.then?(await l)():l)[0];let m=a=>{let[b,c]=(0,f.useState)(),[d,l]=(0,f.useState)(!0),[m,n]=(0,f.useState)(!1),[o,p]=(0,f.useState)(!1),[q,r]=(0,f.useState)(0),[s,t]=(0,f.useState)(-1),[u,v]=(0,f.useState)(-1),[w,x]=(0,f.useState)([]),[y,z]=(0,f.useState)([{id:-1,title:"All seasons"}]),[A,B]=(0,f.useState)([{id:-1,title:"All episodes"}]),C=(0,f.useMemo)(()=>"exclude"===a.modalType?[{id:-1,title:"All collections"}]:[],[a.modalType]),D=(0,f.useMemo)(()=>1===a.type?-1:-1!==u?u:s,[s,u]),E=(0,f.useMemo)(()=>2===a.type?-1!==u?j.R.EPISODES:-1!==s?j.R.SEASONS:j.R.SHOWS:j.R.MOVIES,[s,u]);return(0,f.useEffect)(()=>{document.title="Maintainerr - Overview",t(-1),v(-1),a.type&&2===a.type&&(0,g.Ay)(`/plex/meta/${a.plexId}/children`).then(a=>{z([{id:-1,title:"All seasons"},...a.map(a=>({id:a.ratingKey,title:a.title}))]),l(!1)})},[]),(0,f.useEffect)(()=>{c(w[0]?.id)},[w]),(0,f.useEffect)(()=>{-1!==s?(l(!0),(0,g.Ay)(`/plex/meta/${s}/children`).then(a=>{B([{id:-1,title:"All episodes"},...a.map(a=>({id:a.ratingKey,title:`Episode ${a.index}`}))]),l(!1)})):v(-1)},[s]),(0,f.useEffect)(()=>{l(!0),2===a.type?-1!==u?(0,g.Ay)("/collections?typeId=4").then(a=>{x([...C,...a]),l(!1)}):-1!==s?(0,g.Ay)("/collections?typeId=3").then(a=>{(0,g.Ay)("/collections?typeId=4").then(b=>{x([...C,...a,...b]),l(!1)})}):(0,g.Ay)("/collections?typeId=2").then(a=>{(0,g.Ay)("/collections?typeId=3").then(b=>{(0,g.Ay)("/collections?typeId=4").then(c=>{x([...C,...a,...b,...c]),l(!1)})})}):(0,g.Ay)("/collections?typeId=1").then(a=>{x([...C,...a]),l(!1)})},[s,u]),(0,e.jsxs)(h.A,{loading:d,backgroundClickable:!1,onCancel:()=>{a.onCancel()},onOk:()=>{if(void 0!==b){let c={id:D,type:E};"add"===a.modalType?(0,g.vI)("/collections/media/add",{mediaId:a.plexId,context:c,collectionId:b,action:q}):(0,g.vI)("/rules/exclusion",{mediaId:a.plexId,context:c,collectionId:-1!==b?b:void 0,action:q}),a.onSubmit()}else n(!0)},okDisabled:!1,title:"add"===a.modalType?"Add / Remove Media":"Exclude Media",okText:"Submit",okButtonType:"primary",onSecondary:()=>{},specialButtonType:"warning",specialDisabled:"add"!==a.modalType,specialText:"Remove from all collections",onSpecial:"add"===a.modalType?()=>{p(!0)}:void 0,iconSvg:"",children:[o?(0,e.jsxs)(h.A,{loading:d,backgroundClickable:!1,onCancel:()=>p(!1),onOk:()=>{p(!1),"add"===a.modalType&&(0,g.vI)("/collections/media/add",{mediaId:a.plexId,context:{id:-1,type:a.type},collectionId:void 0,action:1}),a.onSubmit()},okDisabled:!1,title:"Confirmation Required",okText:"Submit",children:["Are you certain you want to proceed? This action will remove the"," ","add"===a.modalType?"media ":"exclusion ","from all collections. For shows, this entails removing all associated"," ","add"===a.modalType?"":"exclusions for ","seasons and episodes as well."]}):void 0,m?(0,e.jsx)(k.A,{title:"Please select a collection",type:"warning"}):void 0,(0,e.jsxs)("div",{className:"mt-6",children:[(0,e.jsx)(i.A,{label:"Action",children:(0,e.jsxs)("select",{name:"Action-field",id:"Action-field",value:q,onChange:a=>{r(+a.target.value)},children:[(0,e.jsx)("option",{value:0,children:"Add"}),(0,e.jsx)("option",{value:1,children:"Remove"})]})}),2===a.type?(0,e.jsx)(i.A,{label:"Seasons",children:(0,e.jsx)("select",{name:"Seasons-field",id:"Seasons-field",value:s,onChange:a=>{t(+a.target.value)},children:y.map(a=>(0,e.jsx)("option",{value:a.id,children:a.title},a.id))})}):void 0,2===a.type&&-1!==s?(0,e.jsx)(i.A,{label:"Episodes",children:(0,e.jsx)("select",{name:"Episodes-field",id:"Episodes-field",value:u,onChange:a=>{v(+a.target.value)},children:A.map(a=>(0,e.jsx)("option",{value:a.id,children:a.title},a.id))})}):void 0,(0,e.jsx)(i.A,{label:"Collection",children:(0,e.jsx)("select",{name:"Collection-field",id:"Collection-field",value:b,onChange:a=>{c(+a.target.value)},children:w?.map(a=>(0,e.jsx)("option",{value:a?.id,children:a?.title},a?.id))})})]})]})};d()}catch(a){d(a)}})},654:(a,b,c)=>{c.d(b,{R:()=>d});var d=function(a){return a[a.MOVIES=1]="MOVIES",a[a.SHOWS=2]="SHOWS",a[a.SEASONS=3]="SEASONS",a[a.EPISODES=4]="EPISODES",a}({})},1535:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>r});var e=c(8732),f=c(4828),g=c(7242),h=c(6761),i=c.n(h),j=c(2015),k=c(5410),l=c(8281),m=c(203),n=c(9496),o=c(3629),p=c(4895),q=a([l,m,n,p]);[l,m,n,p]=q.then?(await q)():q;let r=(0,j.memo)(({id:a,summary:b,year:c,mediaType:d,title:h,libraryId:q,type:r,collectionId:s=0,daysLeft:t=9999,exclusionId:u,tmdbid:v,userScore:w,canExpand:x=!1,collectionPage:y=!1,exclusionType:z,isManual:A=!1,onRemove:B=a=>{}})=>{let C=(0,k.$)(),[D,E]=(0,j.useState)(!1),[F,G]=(0,j.useState)(null),[H,I]=(0,j.useState)(!1),[J,K]=(0,j.useState)(!1),[L,M]=(0,j.useState)(!1),[N,O]=(0,j.useState)(!1);(0,j.useEffect)(()=>{v&&(0,l.Ay)(`/moviedb/image/${d}/${v}`).then(a=>G(a)),P()},[]);let P=()=>{y||(0,l.Ay)(`/rules/exclusion?plexId=${a}`).then(a=>a.length>0?M(!0):M(!1))};return c&&"episode"!==d&&(c=c.slice(0,4)),(0,e.jsxs)("div",{className:"w-full",children:[H?(0,e.jsx)(m.A,{plexId:a,...q?{libraryId:q}:{},...r?{type:r}:{},onSubmit:()=>{I(!1)},onCancel:()=>I(!1),modalType:"exclude"}):void 0,J?(0,e.jsx)(m.A,{plexId:a,...q?{libraryId:q}:{},...r?{type:r}:{},onSubmit:()=>{K(!1)},onCancel:()=>K(!1),modalType:"add"}):void 0,(0,e.jsx)("div",{className:`relative transform-gpu cursor-default overflow-hidden rounded-xl bg-zinc-800 bg-cover pb-[150%] outline-none ring-1 transition duration-300 ${D?"scale-105 shadow-lg ring-zinc-500":"scale-100 shadow ring-zinc-700"}`,onMouseEnter:()=>!C&&E(!0),onMouseLeave:()=>E(!1),onClick:()=>D&&void O(!0),role:"link",tabIndex:0,children:(0,e.jsxs)("div",{className:"absolute inset-0 h-full w-full overflow-hidden",children:[F?(0,e.jsx)(i(),{className:"absolute inset-0 h-full w-full",alt:"",src:`https://image.tmdb.org/t/p/w300_and_h450_face${F}`,fill:!0,sizes:"100vw",style:{objectFit:"cover"}}):void 0,(0,e.jsx)("div",{className:"absolute left-0 right-0 flex items-center justify-between p-2",children:(0,e.jsx)("div",{className:`pointer-events-none z-40 rounded-full shadow ${"movie"===d?"bg-zinc-900":"show"===d?"bg-amber-900":"season"===d?"bg-yellow-700":"bg-rose-900"}`,children:(0,e.jsx)("div",{className:"flex h-4 items-center px-2 py-2 text-center text-xs font-medium uppercase tracking-wider text-zinc-200 sm:h-5",children:d})})}),L&&!y?(0,e.jsx)("div",{className:"absolute right-0 flex items-center justify-between p-2",children:(0,e.jsx)("div",{className:`pointer-events-none z-40 rounded-full shadow ${"movie"===d?"bg-zinc-900":"show"===d?"bg-amber-900":"season"===d?"bg-yellow-700":"bg-rose-900"}`,children:(0,e.jsx)("div",{className:"flex h-4 items-center px-2 py-2 text-center text-xs font-medium uppercase tracking-wider text-zinc-200 sm:h-5",children:"EXCL"})})}):void 0,y&&A&&!D?(0,e.jsx)("div",{className:"absolute bottom-0 left-1/2 flex -translate-x-1/2 transform items-center justify-between p-2",children:(0,e.jsx)("div",{className:`pointer-events-none z-40 rounded-full shadow ${"movie"===d?"bg-zinc-900":"show"===d?"bg-amber-900":"season"===d?"bg-yellow-700":"bg-rose-900"}`,children:(0,e.jsx)("div",{className:"flex h-4 items-center px-2 py-2 text-center text-xs font-medium uppercase tracking-wider text-zinc-200 sm:h-5",children:"MANUAL"})})}):void 0,y&&!z&&9999!==t?(0,e.jsx)("div",{className:"absolute right-0 flex items-center justify-between p-2",children:(0,e.jsx)("div",{className:`pointer-events-none z-40 rounded-full shadow ${t<0?"bg-red-700":"movie"===d?"bg-zinc-900":"show"===d?"bg-amber-900":"season"===d?"bg-yellow-700":"bg-rose-900"} `,children:(0,e.jsx)("div",{className:"flex h-4 items-center px-2 py-2 text-center text-xs font-medium uppercase tracking-wider text-zinc-200 sm:h-5",children:t})})}):void 0,y&&"global"===z?(0,e.jsx)("div",{className:"absolute right-0 flex items-center justify-between p-2",children:(0,e.jsx)("div",{className:`pointer-events-none z-40 rounded-full shadow ${"movie"===d?"bg-zinc-900":"show"===d?"bg-amber-900":"season"===d?"bg-yellow-700":"bg-rose-900"}`,children:(0,e.jsx)("div",{className:"flex h-4 items-center px-2 py-2 text-center text-xs font-medium uppercase tracking-wider text-zinc-200 sm:h-5",children:z.toUpperCase()})})}):void 0,(0,e.jsx)(f.e,{as:"div",show:!F||D,className:"absolute inset-0 transform cursor-alias overflow-hidden rounded-xl transition",enter:"opacity-0",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"opacity-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,e.jsx)("div",{className:"absolute inset-0 h-full w-full overflow-hidden text-left",style:{background:"linear-gradient(180deg, rgba(45, 55, 72, 0.4) 0%, rgba(45, 55, 72, 0.9) 100%)"},children:(0,e.jsx)("div",{className:"flex h-full w-full items-end",children:(0,e.jsxs)("div",{className:"w-full px-2 pb-1 text-zinc-200",children:[c&&(0,e.jsx)("div",{className:"text-sm font-medium",children:c}),(0,e.jsx)("h1",{className:"w-full whitespace-normal text-sm font-bold leading-tight",style:{WebkitLineClamp:3,display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical",wordBreak:"break-word"},children:h}),"episode"==d&&(0,e.jsx)("div",{className:"whitespace-normal text-xs",style:{WebkitLineClamp:5,display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical",wordBreak:"break-word"},children:b}),y?(0,e.jsx)(n.A,{plexId:a,popup:z&&"global"===z,onRemove:()=>B(a.toString()),collectionId:s,exclusionId:u}):(0,e.jsxs)("div",{children:[(0,e.jsxs)(o.A,{buttonType:"twin-primary-l",buttonSize:"md",className:"mb-1 mt-2 h-6 w-1/2 text-zinc-200 shadow-md",onClick:a=>{a.stopPropagation(),K(!0)},children:[(0,e.jsx)(g.DocumentAddIcon,{className:"m-auto ml-3 h-3"})," ",(0,e.jsx)("p",{className:"rules-button-text m-auto mr-2",children:"Add"})]}),(0,e.jsxs)(o.A,{buttonSize:"md",buttonType:"twin-primary-r",className:"mt-2 h-6 w-1/2",onClick:a=>{a.stopPropagation(),I(!0)},children:[(0,e.jsx)(g.DocumentRemoveIcon,{className:"m-auto ml-3 h-3"})," ",(0,e.jsx)("p",{className:"rules-button-text m-auto mr-2",children:"Excl"})]})]})]})})})})]})}),!J&&!H&&N&&(0,e.jsx)(p.A,{id:a,onClose:()=>O(!1),title:h,summary:b||"No description available.",mediaType:d,tmdbid:v,year:c,userScore:w})]})},(a,b)=>a.id===b.id);d()}catch(a){d(a)}})},1992:(a,b,c)=>{c.d(b,{A:()=>k});var d=c(8732),e=c(4828),f=c(2015),g=c(2326),h=c(3629),i=c(2548);let j={xs:"sm:max-w-xs",sm:"sm:max-w-sm",md:"sm:max-w-md",lg:"sm:max-w-lg",xl:"sm:max-w-xl","2xl":"sm:max-w-2xl","3xl":"sm:max-w-3xl","4xl":"sm:max-w-4xl","5xl":"sm:max-w-5xl","6xl":"sm:max-w-6xl","7xl":"sm:max-w-7xl"},k=({title:a,onCancel:b,onOk:c,cancelText:k,okText:l,okDisabled:m=!1,cancelButtonType:n="default",okButtonType:o="primary",children:p,disableScrollLock:q,backgroundClickable:r=!0,iconSvg:s,loading:t=!1,secondaryButtonType:u="default",secondaryDisabled:v=!1,onSecondary:w,secondaryText:x,tertiaryButtonType:y="default",tertiaryDisabled:z=!1,tertiaryText:A,onTertiary:B,specialButtonType:C="default",specialDisabled:D=!1,specialText:E,onSpecial:F,backdrop:G,size:H="3xl"})=>{let I=(0,f.useRef)(null);return((a,b)=>{(0,f.useEffect)(()=>{let c=c=>{a.current&&!a.current.contains(c.target)&&b(c)};return document.body.addEventListener("click",c,{capture:!0}),()=>{document.body.removeEventListener("click",c)}},[a,b])})(I,()=>{"function"==typeof b&&r&&b()}),((a,b)=>{(0,f.useEffect)(()=>{let c=window.getComputedStyle(document.body).overflow;return a&&!b&&(document.body.style.overflow="hidden"),()=>{b||(document.body.style.overflow=c)}},[a,b])})(!0,q),(0,g.createPortal)((0,d.jsxs)("div",{className:"fixed bottom-0 left-0 right-0 top-0 z-50 flex h-full w-full items-center justify-center bg-zinc-800 bg-opacity-70",onKeyDown:a=>{"Escape"===a.key&&"function"==typeof b&&r&&b()},children:[(0,d.jsx)(e.e,{as:"div",className:"absolute",enter:"transition opacity-0 duration-1000 transform scale-75",enterFrom:"opacity-0 scale-75",enterTo:"opacity-100 scale-100",leave:"transition opacity-100 duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",show:t,children:(0,d.jsx)(i.A,{})}),(0,d.jsxs)(e.e,{appear:!0,as:"div",className:`relative inline-block w-full transform overflow-auto bg-zinc-700 px-4 pb-4 pt-5 text-left align-bottom shadow-xl ring-1 ring-zinc-700 transition duration-300 sm:my-8 ${j[H]} sm:rounded-lg sm:align-middle`,enterFrom:"scale-75 opacity-0",enterTo:"scale-100 opacity-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",show:!t,role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",style:{maxHeight:"calc(100% - env(safe-area-inset-top) * 2)"},ref:I,children:[(0,d.jsxs)("div",{className:"relative overflow-x-hidden sm:flex sm:items-center",children:[s&&(0,d.jsx)("div",{className:"modal-icon",children:s}),(0,d.jsx)("div",{className:`mt-3 truncate text-center text-white sm:mt-0 sm:text-left ${s?"sm:ml-4":"sm:mb-4"}`,children:a&&(0,d.jsx)("span",{className:"truncate text-lg font-bold leading-6",id:"modal-headline",children:a})})]}),p&&(0,d.jsx)("div",{className:"relative mt-4 text-sm leading-5 text-zinc-300",children:p}),"function"==typeof F&&(0,d.jsx)("div",{className:"mt-4 flex justify-center sm:justify-end",children:(0,d.jsx)(h.A,{buttonType:C,onClick:F,className:"ml-3",children:E||"Special"})}),(b||c||w||B)&&(0,d.jsxs)("div",{className:"relative mt-5 flex flex-row-reverse justify-center sm:mt-4 sm:justify-start",children:["function"==typeof c&&(0,d.jsx)(h.A,{buttonType:o,onClick:c,className:"ml-3",disabled:m,children:l||"Ok"}),"function"==typeof w&&x&&(0,d.jsx)(h.A,{buttonType:u,onClick:w,className:"ml-3",disabled:v,children:x}),"function"==typeof B&&A&&(0,d.jsx)(h.A,{buttonType:y,onClick:B,className:"ml-3",disabled:z,children:A}),"function"==typeof b&&(0,d.jsx)(h.A,{buttonType:n,onClick:b,className:"ml-3",children:k||"Cancel"})]})]})]}),document.body)}},2502:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>l});var e=c(8732),f=c(7825),g=c.n(f),h=c(2015),i=c(2548),j=c(1535),k=a([j]);j=(k.then?(await k)():k)[0];let l=a=>{let b=()=>{!(window.innerHeight+document.documentElement.scrollTop>=.8*document.documentElement.scrollHeight)||a.extrasLoading||a.dataFinished||a.fetchData()};return((0,h.useEffect)(()=>{let a=g().debounce(b,200);return window.addEventListener("scroll",a,{passive:!0}),()=>{window.removeEventListener("scroll",a),a.cancel()}},[]),(0,h.useEffect)(()=>{!(window.innerHeight+document.documentElement.scrollTop>=.8*document.documentElement.scrollHeight)||a.loading||a.extrasLoading||a.dataFinished||a.fetchData()},[a.data]),a.loading)?(0,e.jsx)(i.A,{}):a.data&&a.data.length>0?(0,e.jsxs)("ul",{className:"cards-vertical",children:[a.data.map(b=>(0,e.jsx)("li",{children:(0,e.jsx)(j.A,{id:+b.ratingKey,libraryId:a.libraryId,type:"movie"===b.type?1:"show"===b.type?2:"season"===b.type?3:4,image:"",summary:"movie"===b.type||"show"===b.type?b.summary:"season"===b.type?b.title:"episode"===b.type?"Episode "+b.index+" - "+b.title:"",year:"episode"===b.type?b.parentTitle:b.parentYear?b.parentYear.toString():b.year?.toString(),mediaType:"movie"===b.type?"movie":"show"===b.type?"show":"season"===b.type?"season":"episode",title:b.grandparentTitle?b.grandparentTitle:b.parentTitle?b.parentTitle:b.title,userScore:b.audienceRating?b.audienceRating:0,exclusionId:b.maintainerrExclusionId?b.maintainerrExclusionId:void 0,tmdbid:b.parentData?b.parentData.Guid?.find(a=>a.id?.includes("tmdb"))?.id?.split("tmdb://")[1]:b.Guid?b.Guid.find(a=>a.id?.includes("tmdb"))?.id?.split("tmdb://")[1]:void 0,collectionPage:!!a.collectionPage&&a.collectionPage,exclusionType:b.maintainerrExclusionType,onRemove:a.onRemove,collectionId:a.collectionId,isManual:!!b.maintainerrIsManual&&b.maintainerrIsManual,...a.collectionInfo?{daysLeft:(b=>{if(a.collectionInfo){let c=a.collectionInfo.find(a=>a.plexId===+b);if(c&&c.collection){if(null==c.collection.deleteAfterDays)return;let a=new Date(c.addDate),b=new Date;a.setDate(a.getDate()+c.collection.deleteAfterDays);let d=a.getTime()-b.getTime();return Math.ceil(d/864e5)}}})(+b.ratingKey),collectionId:a.collectionInfo.find(a=>a.plexId===+b.ratingKey)?.collectionId}:void 0})},+b.ratingKey)),a.extrasLoading?(0,e.jsx)(i.r,{}):void 0]}):(0,e.jsx)(e.Fragment,{})};d()}catch(a){d(a)}})},3629:(a,b,c)=>{c.d(b,{A:()=>f});var d=c(8732),e=c(2015);let f=c.n(e)().forwardRef(function({buttonType:a="default",buttonSize:b="default",as:c,children:e,className:f,...g},h){let i=["inline-flex items-center justify-center border border-transparent leading-5 font-medium focus:outline-none transition ease-in-out duration-150 cursor-pointer disabled:opacity-50 whitespace-nowrap"];switch(a){case"primary":i.push("text-white bg-amber-600 border-amber-600 hover:bg-amber-500 hover:border-amber-500 rounded-md focus:border-amber-700 focus:ring-amber active:bg-amber-700 active:border-amber-700");break;case"danger":i.push("text-white bg-red-600 border-red-600 hover:bg-red-500 hover:border-red-500 focus:border-red-700 rounded-md focus:ring-red active:bg-red-700 active:border-red-700");break;case"warning":i.push("text-white bg-zinc-800 border-zinc-800 hover:bg-zinc-600 hover:border-zinc-600 focus:border-zinc-700 rounded-md focus:ring-zinc active:bg-zinc-700 active:border-zinc-700");break;case"success":i.push("text-white bg-amber-900 border-amber-900 hover:bg-amber-700 hover:border-amber-700 focus:border-amber-700 rounded-md focus:ring-amber active:bg-amber-700 active:border-amber-700");break;case"ghost":i.push("text-white bg-transaprent border-zinc-600 hover:border-zinc-200 focus:border-zinc-100 rounded-md active:border-zinc-100");break;case"twin-primary-l":i.push("text-white bg-amber-600 border-amber-600 hover:bg-amber-500 hover:border-amber-500 focus:border-amber-700 focus:ring-amber active:bg-amber-700 active:border-amber-700 rounded-l");break;case"twin-primary-r":i.push("text-white bg-amber-600 border-amber-600 hover:bg-amber-500 hover:border-amber-500 focus:border-amber-700 focus:ring-amber active:bg-amber-700 active:border-amber-700 rounded-r");break;case"twin-secondary-l":i.push("text-white bg-amber-900 border-amber-900 hover:bg-amber-700 hover:border-amber-700 focus:border-amber-700 focus:ring-amber active:bg-amber-700 active:border-amber-700 rounded-l");break;case"twin-secondary-r":i.push("text-white bg-amber-900 border-amber-900 hover:bg-amber-700 hover:border-amber-700 focus:border-amber-700 focus:ring-amber active:bg-amber-700 active:border-amber-700 rounded-r");break;default:i.push("text-zinc-200 bg-zinc-600 border-zinc-600 hover:text-white hover:bg-zinc-500 hover:border-zinc-500 group-hover:text-white rounded-md group-hover:bg-zinc-500 group-hover:border-zinc-500 focus:border-amber-600 focus:ring-amber active:text-zinc-200 active:bg-zinc-500 active:border-zinc-500")}switch(b){case"sm":i.push("px-2.5 py-1.5 text-xs button-sm");break;case"lg":i.push("px-6 py-3 text-base button-lg");break;default:i.push("px-4 py-2 text-sm button-md")}return(i.push(f??""),"a"===c)?(0,d.jsx)("a",{className:i.join(" "),...g,ref:h,children:(0,d.jsx)("span",{className:"flex items-center",children:e})}):(0,d.jsx)("button",{className:i.join(" "),...g,ref:h,children:(0,d.jsx)("span",{className:"flex items-center",children:e})})})},3928:(a,b,c)=>{c.d(b,{A:()=>e});var d=c(8732);let e=a=>(0,d.jsxs)("div",{className:"form-row",children:[(0,d.jsx)("label",{htmlFor:`${a.htmlField?a.htmlField:a.label}-field`,className:"text-label",children:a.label}),(0,d.jsx)("div",{className:"form-input",children:(0,d.jsx)("div",{className:"form-input-field",children:a.children})})]})},3947:(a,b,c)=>{c.d(b,{A:()=>f});var d=c(8732),e=c(7242);c(2015);let f=({title:a,children:b,type:c})=>{let f={bgColor:"bg-zinc-800",titleColor:"text-zinc-100",textColor:"text-zinc-300",svg:(0,d.jsx)(e.ExclamationIcon,{className:"h-5 w-5"})};switch(c){case"info":f={bgColor:"bg-zinc-800",titleColor:"text-zinc-100",textColor:"text-zinc-300",svg:(0,d.jsx)(e.InformationCircleIcon,{className:"h-5 w-5"})};break;case"error":f={bgColor:"bg-red-600",titleColor:"text-red-100",textColor:"text-red-300",svg:(0,d.jsx)(e.XCircleIcon,{className:"h-5 w-5"})}}return(0,d.jsx)("div",{className:`mb-4 rounded-md p-4 ${f.bgColor}`,children:(0,d.jsxs)("div",{className:"flex",children:[(0,d.jsx)("div",{className:`flex-shrink-0 ${f.titleColor}`,children:f.svg}),(0,d.jsxs)("div",{className:"ml-3",children:[a&&(0,d.jsx)("div",{className:`text-sm font-medium ${f.titleColor}`,children:a}),b&&(0,d.jsx)("div",{className:`button-text mt-2 text-sm first:mt-0 ${f.textColor}`,children:b})]})]})})}},4895:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>n});var e=c(8732),f=c(6761),g=c.n(f),h=c(2015),i=c(8281),j=a([i]);i=(j.then?(await j)():j)[0];let k=process.env.NEXT_PUBLIC_BASE_PATH??"",l={imdb:{audience:`${k}/icons_logos/imdb_icon.svg`},rottentomatoes:{critic:`${k}/icons_logos/rt_critic.svg`,audience:`${k}/icons_logos/rt_audience.svg`},themoviedb:{audience:`${k}/icons_logos/tmdb_icon.svg`}},m=(0,h.memo)(({onClose:a,mediaType:b,id:c,summary:d,year:f,title:j,tmdbid:k})=>{let[m,n]=(0,h.useState)(!0),[o,p]=(0,h.useState)(null),[q,r]=(0,h.useState)(null),[s,t]=(0,h.useState)(null),[u,v]=(0,h.useState)(null),w=(0,h.useMemo)(()=>["show","season","episode"].includes(b)?"tv":b,[b]),x=process.env.NEXT_PUBLIC_BASE_PATH??"";return(0,h.useEffect)(()=>{(0,i.Ay)("/plex").then(a=>r(a.machineIdentifier)),(0,i.Ay)("/settings").then(a=>t(a?.tautulli_url||null)),(0,i.Ay)(`/plex/meta/${c}`).then(a=>{v(a),n(!1)}),(0,i.Ay)(`/moviedb/backdrop/${b}/${k}`).then(a=>p(a)).catch(a=>{console.error("Error fetching backdrop image. Check your Plex metadata",a),p(null)})},[c,b,k]),(0,h.useEffect)(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}),[]),(0,e.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70 px-3",onClick:a,children:(0,e.jsxs)("div",{className:"relative max-h-[90vh] w-full max-w-4xl overflow-auto rounded-xl bg-zinc-800 shadow-lg",onClick:a=>a.stopPropagation(),children:[(0,e.jsxs)("div",{className:"relative h-72 w-full overflow-hidden p-2 xl:h-96",children:[(0,e.jsx)("div",{className:"h-full w-full rounded-xl bg-cover bg-center bg-no-repeat",style:{backgroundImage:o?`url(https://image.tmdb.org/t/p/w1280${o})`:"linear-gradient(to bottom, #1e293b, #1e293b)"}}),m&&(0,e.jsx)("div",{className:"absolute bottom-0 left-0 right-0 top-0 flex items-center justify-center bg-black bg-opacity-50",children:(0,e.jsx)("div",{className:"h-16 w-16 animate-spin rounded-full border-4 border-t-4 border-sky-600 border-t-sky-200"})}),(0,e.jsxs)("div",{className:"absolute left-0 top-0 z-10 flex h-full w-full gap-x-4 p-4",children:[(0,e.jsxs)("div",{className:"flex grow flex-col",children:[(0,e.jsxs)("div",{className:"max-w-fit grow",children:[(0,e.jsx)("div",{className:`pointer-events-none flex justify-center rounded-lg bg-opacity-70 p-2 text-xs font-medium uppercase text-zinc-200 ${"movie"===b?"bg-black":"show"===b?"bg-amber-900":"season"===b?"bg-yellow-700":"bg-rose-900"}`,children:b}),u?.contentRating&&(0,e.jsx)("div",{className:"pointer-events-none mt-1 rounded-lg bg-black bg-opacity-70 p-2 text-xs font-medium uppercase text-zinc-200",children:`Rated: ${u.contentRating}`})]}),u?.Rating&&u.Rating.length>0?(0,e.jsx)("div",{className:"flex flex-wrap-reverse gap-1",children:u.Rating.map((a,b)=>{let c=a.image.split("://")[0],d=a.type,f=l[c]?.[d],h=a.value;["themoviedb","rottentomatoes"].includes(c)&&"number"==typeof a.value?h=10*a.value:"imdb"===c&&(h=a.value);let i=["themoviedb","rottentomatoes"].includes(c)?`${h}%`:`${h}`;return(0,e.jsxs)("div",{className:"flex items-center justify-center space-x-1.5 rounded-lg bg-black bg-opacity-70 px-3 py-1 text-white shadow-lg",children:[(0,e.jsx)(g(),{src:f,alt:`${c} ${d} Icon`,width:24,height:24,className:"h-6 w-6",title:`${c}-${d}`}),(0,e.jsx)("span",{className:"cursor-default text-sm font-medium",children:i})]},b)})}):""]}),(0,e.jsxs)("div",{className:"flex flex-col items-end",children:[(0,e.jsxs)("div",{className:"max-w-fit grow",children:[k&&(0,e.jsx)("div",{children:(0,e.jsx)("a",{href:`https://themoviedb.org/${w}/${k}`,target:"_blank",children:(0,e.jsx)(g(),{src:`${x}/icons_logos/tmdb_logo.svg`,alt:"TMDB Logo",width:128,height:32,className:"h-8 w-32 rounded-lg bg-black bg-opacity-70 p-2 shadow-lg"})})}),(0,e.jsx)("div",{children:(0,e.jsx)("a",{href:`https://app.plex.tv/desktop#!/server/${q}/details?key=%2Flibrary%2Fmetadata%2F${c}`,target:"_blank",children:(0,e.jsx)(g(),{src:`${x}/icons_logos/plex_logo.svg`,alt:"Plex Logo",width:128,height:32,className:"mt-1 h-8 w-32 rounded-lg bg-black bg-opacity-70 p-1 shadow-lg"})})}),s&&(0,e.jsx)("div",{children:(0,e.jsx)("a",{href:`${s}/info?rating_key=${c}&source=history`,target:"_blank",children:(0,e.jsx)(g(),{src:`${x}/icons_logos/tautulli_logo.svg`,alt:"Plex Logo",width:128,height:32,className:"mt-1 h-8 w-32 rounded-lg bg-black bg-opacity-70 p-1.5 shadow-lg"})})})]}),u?.Genre&&u.Genre.length>0?(0,e.jsx)("div",{className:"pointer-events-none flex flex-wrap-reverse items-end justify-end gap-1",children:u.Genre.map((a,b)=>(0,e.jsx)("span",{className:"flex items-center rounded-lg bg-black bg-opacity-70 p-2 text-xs font-medium text-white shadow-lg",children:a.tag},b))}):""]})]})]}),(0,e.jsxs)("div",{className:"p-4",children:[(0,e.jsx)("div",{className:"flex items-center justify-between border-b pb-4",children:(0,e.jsx)("div",{children:(0,e.jsxs)("h2",{className:"text-xl font-semibold text-gray-100",children:[j," (",f,")"]})})}),(0,e.jsx)("div",{className:"mt-2 text-gray-300",children:(0,e.jsx)("p",{children:d||"No summary available."})}),(0,e.jsxs)("div",{className:"mr-0.5 mt-6 flex flex-row items-center justify-between gap-4",children:[u?.Guid&&["movie","show"].includes(b)&&u.Guid.length>0&&(0,e.jsxs)("div",{className:"flex flex-wrap items-center gap-1 text-xs text-zinc-400",children:[u.Guid.map((a,b)=>(0,e.jsx)("span",{className:"flex items-center justify-center rounded-lg bg-zinc-700 p-2 text-xs text-white shadow-lg",children:a.id},b)),"(Plex metadata IDs)"]}),(0,e.jsx)("div",{className:"ml-auto flex space-x-3",children:(0,e.jsx)("button",{onClick:a,className:"rounded bg-amber-600 px-4 py-2 hover:bg-amber-500 focus:outline-none",children:"Close"})})]})]})]})})});m.displayName="MediaModalContent";let n=m;d()}catch(a){d(a)}})},5329:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>j});var e=c(8732),f=c(2015),g=c(973),h=c(8281),i=a([h]);h=(i.then?(await i)():i)[0];let j=a=>{let b=(0,f.useContext)(g.A);return(0,f.useEffect)(()=>{b.libraries.length<=0&&(0,h.Ay)("/plex/libraries").then(c=>{c?(b.addLibraries(c),void 0===a.allPossible||a.allPossible||a.onSwitch(+c[0].key)):b.addLibraries([])})},[]),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{className:"mb-5 w-full",children:(0,e.jsx)("form",{children:(0,e.jsxs)("select",{className:"border-zinc-600 hover:border-zinc-500 focus:border-zinc-500 focus:bg-opacity-100 focus:placeholder-zinc-400 focus:outline-none focus:ring-0",onChange:b=>{a.onSwitch(+b.target.value)},children:[void 0===a.allPossible||a.allPossible?(0,e.jsx)("option",{value:9999,children:"All"}):void 0,b.libraries.map(a=>(0,e.jsx)("option",{value:a.key,children:a.title},a.key))]})})})})};d()}catch(a){d(a)}})},5410:(a,b,c)=>{c.d(b,{$:()=>g});var d=c(2015),e=c.n(d);c(8732);let f=e().createContext({isTouch:!1}),g=()=>{let{isTouch:a}=(0,d.useContext)(f);return a}},9496:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>l});var e=c(8732),f=c(7242),g=c(2015),h=c(8281),i=c(3629),j=c(1992),k=a([h]);h=(k.then?(await k)():k)[0];let l=a=>{let[b,c]=(0,g.useState)(!1),[d,k]=(0,g.useState)(!1),l=b=>{b?.stopPropagation(),a.popup&&k(!d)},m=b=>{b?.stopPropagation(),a.exclusionId?(0,h.su)(`/rules/exclusion/${a.exclusionId}`):((0,h.su)(`/collections/media?mediaId=${a.plexId}&collectionId=${a.collectionId}`),(0,h.vI)("/rules/exclusion",{collectionId:a.collectionId,mediaId:a.plexId,action:0})),a.onRemove()};return(0,e.jsxs)("div",{className:"w-full",children:[b?(0,e.jsx)(i.A,{buttonType:"primary",buttonSize:"md",className:"mb-1 mt-2 h-6 w-full text-zinc-200 shadow-md",onClick:b=>{a.popup?l(b):m(b)},children:(0,e.jsx)("p",{className:"rules-button-text m-auto mr-2",children:"Are you sure?"})}):(0,e.jsxs)(i.A,{buttonType:"primary",buttonSize:"md",className:"mb-1 mt-2 h-6 w-full text-zinc-200 shadow-md",onClick:a=>{a.stopPropagation(),c(!0)},children:[(0,e.jsx)(f.TrashIcon,{className:"m-auto ml-3 h-3"})," ",(0,e.jsx)("p",{className:"rules-button-text m-auto mr-2",children:"Remove"})]}),d?(0,e.jsx)(j.A,{title:"Warning",onOk:m,onCancel:l,children:(0,e.jsxs)("p",{children:["This item is excluded ",(0,e.jsx)("b",{children:"globally"}),". Removing this exclusion will apply the change to all collections"]})}):void 0]})};d()}catch(a){d(a)}})}};