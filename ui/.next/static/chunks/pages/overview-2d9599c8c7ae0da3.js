(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[449],{19377:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/overview",function(){return r(42777)}])},42777:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var n=r(37876),u=r(75783),c=r.n(u),s=r(14232),a=r(91104),i=r(85587),l=r(41568),f=r(91710),o=r(27046);let h=()=>{let e=(0,s.useRef)(!1),[t,r]=(0,s.useState)(!1),[u,h]=(0,s.useState)([]),d=(0,s.useRef)([]),[x,_]=(0,s.useState)(999),v=(0,s.useRef)(999),[w,E]=(0,s.useState)(),b=(0,s.useRef)(void 0),[y,S]=(0,s.useState)(!1),g=(0,s.useRef)(0),k=(0,s.useContext)(i.A),m=(0,s.useContext)(a.A),p=t=>{e.current=t};(0,s.useEffect)(()=>(document.title="Maintainerr - Overview",setTimeout(()=>{e.current&&0===u.length&&""===k.search.text&&m.libraries.length>0&&A(w||+m.libraries[0].key)},300),()=>{h([]),d.current=[],v.current=999,g.current=0}),[]),(0,s.useEffect)(()=>{if(""!==k.search.text){var e;(0,l.Ay)("/plex/search/".concat(k.search.text)).then(e=>{S(!0),_(e.length),g.current=50*e.length,h(e||[]),p(!1)}),E(+(null==(e=m.libraries[0])?void 0:e.key))}else S(!1),h([]),_(999),g.current=0,p(!0),N()},[k.search.text]),(0,s.useEffect)(()=>{b.current=w,N()},[w]),(0,s.useEffect)(()=>{d.current=u},[u]),(0,s.useEffect)(()=>{v.current=x},[x]);let A=e=>{p(!0),g.current=0,_(999),h([]),d.current=[],S(!1),E(e)},N=async()=>{if(b.current&&""===k.search.text&&v.current>=30*g.current){let e=c()(b.current),t=await (0,l.Ay)("/plex/library/".concat(b.current,"/content/").concat(g.current+1,"?amount=").concat(30));e===b.current&&(_(t.totalSize),g.current=g.current+1,h([...d.current,...t&&t.items?t.items:[]]),p(!1)),r(!1),p(!1)}};return(0,n.jsxs)("div",{className:"w-full",children:[y?void 0:(0,n.jsx)(f.A,{allPossible:!1,onSwitch:A}),w?(0,n.jsx)(o.A,{dataFinished:!(v.current>=30*g.current),fetchData:()=>{r(!0),N()},loading:e.current,extrasLoading:t&&!e.current&&v.current>=30*g.current,data:u,libraryId:w}):void 0]})},d=()=>(0,n.jsx)(h,{})}},e=>{e.O(0,[888,327,447,397,636,593,792],()=>e(e.s=19377)),_N_E=e.O()}]);