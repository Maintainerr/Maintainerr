"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[397],{11684:(e,t,l)=>{l.d(t,{A:()=>d});var a=l(37876),i=l(63043),o=l(14232),s=l(98477),n=l(46100),r=l(10291);let c={xs:"sm:max-w-xs",sm:"sm:max-w-sm",md:"sm:max-w-md",lg:"sm:max-w-lg",xl:"sm:max-w-xl","2xl":"sm:max-w-2xl","3xl":"sm:max-w-3xl","4xl":"sm:max-w-4xl","5xl":"sm:max-w-5xl","6xl":"sm:max-w-6xl","7xl":"sm:max-w-7xl"},d=e=>{let{title:t,onCancel:l,onOk:d,cancelText:m,okText:u,okDisabled:x=!1,cancelButtonType:b="default",okButtonType:h="primary",children:p,disableScrollLock:v,backgroundClickable:g=!0,iconSvg:f,loading:y=!1,secondaryButtonType:w="default",secondaryDisabled:j=!1,onSecondary:N,secondaryText:k,tertiaryButtonType:S="default",tertiaryDisabled:A=!1,tertiaryText:z,onTertiary:I,specialButtonType:C="default",specialDisabled:E=!1,specialText:T,onSpecial:_,backdrop:P,size:R="3xl"}=e,D=(0,o.useRef)(null);return((e,t)=>{(0,o.useEffect)(()=>{let l=l=>{e.current&&!e.current.contains(l.target)&&t(l)};return document.body.addEventListener("click",l,{capture:!0}),()=>{document.body.removeEventListener("click",l)}},[e,t])})(D,()=>{"function"==typeof l&&g&&l()}),((e,t)=>{(0,o.useEffect)(()=>{let l=window.getComputedStyle(document.body).overflow;return e&&!t&&(document.body.style.overflow="hidden"),()=>{t||(document.body.style.overflow=l)}},[e,t])})(!0,v),(0,s.createPortal)((0,a.jsxs)("div",{className:"fixed bottom-0 left-0 right-0 top-0 z-50 flex h-full w-full items-center justify-center bg-zinc-800 bg-opacity-70",onKeyDown:e=>{"Escape"===e.key&&"function"==typeof l&&g&&l()},children:[(0,a.jsx)(i.e,{as:"div",className:"absolute",enter:"transition opacity-0 duration-1000 transform scale-75",enterFrom:"opacity-0 scale-75",enterTo:"opacity-100 scale-100",leave:"transition opacity-100 duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",show:y,children:(0,a.jsx)(r.A,{})}),(0,a.jsxs)(i.e,{appear:!0,as:"div",className:"relative inline-block w-full transform overflow-auto bg-zinc-700 px-4 pb-4 pt-5 text-left align-bottom shadow-xl ring-1 ring-zinc-700 transition duration-300 sm:my-8 ".concat(c[R]," sm:rounded-lg sm:align-middle"),enterFrom:"scale-75 opacity-0",enterTo:"scale-100 opacity-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",show:!y,role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",style:{maxHeight:"calc(100% - env(safe-area-inset-top) * 2)"},ref:D,children:[(0,a.jsxs)("div",{className:"relative overflow-x-hidden sm:flex sm:items-center",children:[f&&(0,a.jsx)("div",{className:"modal-icon",children:f}),(0,a.jsx)("div",{className:"mt-3 truncate text-center text-white sm:mt-0 sm:text-left ".concat(f?"sm:ml-4":"sm:mb-4"),children:t&&(0,a.jsx)("span",{className:"truncate text-lg font-bold leading-6",id:"modal-headline",children:t})})]}),p&&(0,a.jsx)("div",{className:"relative mt-4 text-sm leading-5 text-zinc-300",children:p}),"function"==typeof _&&(0,a.jsx)("div",{className:"mt-4 flex justify-center sm:justify-end",children:(0,a.jsx)(n.A,{buttonType:C,onClick:_,className:"ml-3",children:T||"Special"})}),(l||d||N||I)&&(0,a.jsxs)("div",{className:"relative mt-5 flex flex-row-reverse justify-center sm:mt-4 sm:justify-start",children:["function"==typeof d&&(0,a.jsx)(n.A,{buttonType:h,onClick:d,className:"ml-3",disabled:x,children:u||"Ok"}),"function"==typeof N&&k&&(0,a.jsx)(n.A,{buttonType:w,onClick:N,className:"ml-3",disabled:j,children:k}),"function"==typeof I&&z&&(0,a.jsx)(n.A,{buttonType:S,onClick:I,className:"ml-3",disabled:A,children:z}),"function"==typeof l&&(0,a.jsx)(n.A,{buttonType:b,onClick:l,className:"ml-3",children:m||"Cancel"})]})]})]}),document.body)}},27046:(e,t,l)=>{l.d(t,{A:()=>C});var a,i=l(37876),o=l(82851),s=l.n(o),n=l(14232),r=l(10291),c=l(63043),d=l(31974),m=l(55629),u=l(54587),x=l.n(u);let b=n.createContext({isTouch:!1});var h=l(41568),p=l(11684),v=l(83247),g=l(94035),f=l(36572);let y=e=>{let[t,l]=(0,n.useState)(),[a,o]=(0,n.useState)(!0),[s,r]=(0,n.useState)(!1),[c,d]=(0,n.useState)(!1),[m,u]=(0,n.useState)(0),[x,b]=(0,n.useState)(-1),[y,w]=(0,n.useState)(-1),[j,N]=(0,n.useState)([]),[k,S]=(0,n.useState)([{id:-1,title:"All seasons"}]),[A,z]=(0,n.useState)([{id:-1,title:"All episodes"}]),I=(0,n.useMemo)(()=>"exclude"===e.modalType?[{id:-1,title:"All collections"}]:[],[e.modalType]),C=(0,n.useMemo)(()=>1===e.type?-1:-1!==y?y:x,[x,y]),E=(0,n.useMemo)(()=>2===e.type?-1!==y?g.R.EPISODES:-1!==x?g.R.SEASONS:g.R.SHOWS:g.R.MOVIES,[x,y]);return(0,n.useEffect)(()=>{document.title="Maintainerr - Overview",b(-1),w(-1),e.type&&2===e.type&&(0,h.Ay)("/plex/meta/".concat(e.plexId,"/children")).then(e=>{S([{id:-1,title:"All seasons"},...e.map(e=>({id:e.ratingKey,title:e.title}))]),o(!1)})},[]),(0,n.useEffect)(()=>{var e;l(null==(e=j[0])?void 0:e.id)},[j]),(0,n.useEffect)(()=>{-1!==x?(o(!0),(0,h.Ay)("/plex/meta/".concat(x,"/children")).then(e=>{z([{id:-1,title:"All episodes"},...e.map(e=>({id:e.ratingKey,title:"Episode ".concat(e.index)}))]),o(!1)})):w(-1)},[x]),(0,n.useEffect)(()=>{o(!0),2===e.type?-1!==y?(0,h.Ay)("/collections?typeId=4").then(e=>{N([...I,...e]),o(!1)}):-1!==x?(0,h.Ay)("/collections?typeId=3").then(e=>{(0,h.Ay)("/collections?typeId=4").then(t=>{N([...I,...e,...t]),o(!1)})}):(0,h.Ay)("/collections?typeId=2").then(e=>{(0,h.Ay)("/collections?typeId=3").then(t=>{(0,h.Ay)("/collections?typeId=4").then(l=>{N([...I,...e,...t,...l]),o(!1)})})}):(0,h.Ay)("/collections?typeId=1").then(e=>{N([...I,...e]),o(!1)})},[x,y]),(0,i.jsxs)(p.A,{loading:a,backgroundClickable:!1,onCancel:()=>{e.onCancel()},onOk:()=>{if(void 0!==t){let l={id:C,type:E};"add"===e.modalType?(0,h.vI)("/collections/media/add",{mediaId:e.plexId,context:l,collectionId:t,action:m}):(0,h.vI)("/rules/exclusion",{mediaId:e.plexId,context:l,collectionId:-1!==t?t:void 0,action:m}),e.onSubmit()}else r(!0)},okDisabled:!1,title:"add"===e.modalType?"Add / Remove Media":"Exclude Media",okText:"Submit",okButtonType:"primary",onSecondary:()=>{},specialButtonType:"warning",specialDisabled:"add"!==e.modalType,specialText:"Remove from all collections",onSpecial:"add"===e.modalType?()=>{d(!0)}:void 0,iconSvg:"",children:[c?(0,i.jsxs)(p.A,{loading:a,backgroundClickable:!1,onCancel:()=>d(!1),onOk:()=>{d(!1),"add"===e.modalType&&(0,h.vI)("/collections/media/add",{mediaId:e.plexId,context:{id:-1,type:e.type},collectionId:void 0,action:1}),e.onSubmit()},okDisabled:!1,title:"Confirmation Required",okText:"Submit",children:["Are you certain you want to proceed? This action will remove the"," ","add"===e.modalType?"media ":"exclusion ","from all collections. For shows, this entails removing all associated"," ","add"===e.modalType?"":"exclusions for ","seasons and episodes as well."]}):void 0,s?(0,i.jsx)(f.A,{title:"Please select a collection",type:"warning"}):void 0,(0,i.jsxs)("div",{className:"mt-6",children:[(0,i.jsx)(v.A,{label:"Action",children:(0,i.jsxs)("select",{name:"Action-field",id:"Action-field",value:m,onChange:e=>{u(+e.target.value)},children:[(0,i.jsx)("option",{value:0,children:"Add"}),(0,i.jsx)("option",{value:1,children:"Remove"})]})}),2===e.type?(0,i.jsx)(v.A,{label:"Seasons",children:(0,i.jsx)("select",{name:"Seasons-field",id:"Seasons-field",value:x,onChange:e=>{b(+e.target.value)},children:k.map(e=>(0,i.jsx)("option",{value:e.id,children:e.title},e.id))})}):void 0,2===e.type&&-1!==x?(0,i.jsx)(v.A,{label:"Episodes",children:(0,i.jsx)("select",{name:"Episodes-field",id:"Episodes-field",value:y,onChange:e=>{w(+e.target.value)},children:A.map(e=>(0,i.jsx)("option",{value:e.id,children:e.title},e.id))})}):void 0,(0,i.jsx)(v.A,{label:"Collection",children:(0,i.jsx)("select",{name:"Collection-field",id:"Collection-field",value:t,onChange:e=>{l(+e.target.value)},children:null==j?void 0:j.map(e=>(0,i.jsx)("option",{value:null==e?void 0:e.id,children:null==e?void 0:e.title},null==e?void 0:e.id))})})]})]})};var w=l(40556),j=l(46100);let N=e=>{let[t,l]=(0,n.useState)(!1),[a,o]=(0,n.useState)(!1),s=t=>{null==t||t.stopPropagation(),e.popup&&o(!a)},r=t=>{null==t||t.stopPropagation(),e.exclusionId?(0,h.su)("/rules/exclusion/".concat(e.exclusionId)):((0,h.su)("/collections/media?mediaId=".concat(e.plexId,"&collectionId=").concat(e.collectionId)),(0,h.vI)("/rules/exclusion",{collectionId:e.collectionId,mediaId:e.plexId,action:0})),e.onRemove()};return(0,i.jsxs)("div",{className:"w-full",children:[t?(0,i.jsx)(j.A,{buttonType:"primary",buttonSize:"md",className:"mb-1 mt-2 h-6 w-full text-zinc-200 shadow-md",onClick:t=>{e.popup?s(t):r(t)},children:(0,i.jsx)("p",{className:"rules-button-text m-auto mr-2",children:"Are you sure?"})}):(0,i.jsxs)(j.A,{buttonType:"primary",buttonSize:"md",className:"mb-1 mt-2 h-6 w-full text-zinc-200 shadow-md",onClick:e=>{e.stopPropagation(),l(!0)},children:[(0,i.jsx)(w.A,{className:"m-auto ml-3 h-3"})," ",(0,i.jsx)("p",{className:"rules-button-text m-auto mr-2",children:"Remove"})]}),a?(0,i.jsx)(p.A,{title:"Warning",onOk:r,onCancel:s,children:(0,i.jsxs)("p",{children:["This item is excluded ",(0,i.jsx)("b",{children:"globally"}),". Removing this exclusion will apply the change to all collections"]})}):void 0]})};var k=l(65364);let S=null!=(a=k.env.NEXT_PUBLIC_BASE_PATH)?a:"",A={imdb:{audience:"".concat(S,"/icons_logos/imdb_icon.svg")},rottentomatoes:{critic:"".concat(S,"/icons_logos/rt_critic.svg"),audience:"".concat(S,"/icons_logos/rt_audience.svg")},themoviedb:{audience:"".concat(S,"/icons_logos/tmdb_icon.svg")}},z=(0,n.memo)(e=>{var t;let{onClose:l,mediaType:a,id:o,summary:s,year:r,title:c,tmdbid:d}=e,[m,u]=(0,n.useState)(!0),[b,p]=(0,n.useState)(null),[v,g]=(0,n.useState)(null),[f,y]=(0,n.useState)(null),[w,j]=(0,n.useState)(null),N=(0,n.useMemo)(()=>["show","season","episode"].includes(a)?"tv":a,[a]),S=null!=(t=k.env.NEXT_PUBLIC_BASE_PATH)?t:"";return(0,n.useEffect)(()=>{(0,h.Ay)("/plex").then(e=>g(e.machineIdentifier)),(0,h.Ay)("/settings").then(e=>y((null==e?void 0:e.tautulli_url)||null)),(0,h.Ay)("/plex/meta/".concat(o)).then(e=>{j(e),u(!1)}),(0,h.Ay)("/moviedb/backdrop/".concat(a,"/").concat(d)).then(e=>p(e)).catch(e=>{console.error("Error fetching backdrop image. Check your Plex metadata",e),p(null)})},[o,a,d]),(0,n.useEffect)(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}),[]),(0,i.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70 px-3",onClick:l,children:(0,i.jsxs)("div",{className:"relative max-h-[90vh] w-full max-w-4xl overflow-auto rounded-xl bg-zinc-800 shadow-lg",onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{className:"relative h-72 w-full overflow-hidden p-2 xl:h-96",children:[(0,i.jsx)("div",{className:"h-full w-full rounded-xl bg-cover bg-center bg-no-repeat",style:{backgroundImage:b?"url(https://image.tmdb.org/t/p/w1280".concat(b,")"):"linear-gradient(to bottom, #1e293b, #1e293b)"}}),m&&(0,i.jsx)("div",{className:"absolute bottom-0 left-0 right-0 top-0 flex items-center justify-center bg-black bg-opacity-50",children:(0,i.jsx)("div",{className:"h-16 w-16 animate-spin rounded-full border-4 border-t-4 border-sky-600 border-t-sky-200"})}),(0,i.jsxs)("div",{className:"absolute left-0 top-0 z-10 flex h-full w-full gap-x-4 p-4",children:[(0,i.jsxs)("div",{className:"flex grow flex-col",children:[(0,i.jsxs)("div",{className:"max-w-fit grow",children:[(0,i.jsx)("div",{className:"pointer-events-none flex justify-center rounded-lg bg-opacity-70 p-2 text-xs font-medium uppercase text-zinc-200 ".concat("movie"===a?"bg-black":"show"===a?"bg-amber-900":"season"===a?"bg-yellow-700":"bg-rose-900"),children:a}),(null==w?void 0:w.contentRating)&&(0,i.jsx)("div",{className:"pointer-events-none mt-1 rounded-lg bg-black bg-opacity-70 p-2 text-xs font-medium uppercase text-zinc-200",children:"Rated: ".concat(w.contentRating)})]}),(null==w?void 0:w.Rating)&&w.Rating.length>0?(0,i.jsx)("div",{className:"flex flex-wrap-reverse gap-1",children:w.Rating.map((e,t)=>{var l;let a=e.image.split("://")[0],o=e.type,s=null==(l=A[a])?void 0:l[o],n=e.value;["themoviedb","rottentomatoes"].includes(a)&&"number"==typeof e.value?n=10*e.value:"imdb"===a&&(n=e.value);let r=["themoviedb","rottentomatoes"].includes(a)?"".concat(n,"%"):"".concat(n);return(0,i.jsxs)("div",{className:"flex items-center justify-center space-x-1.5 rounded-lg bg-black bg-opacity-70 px-3 py-1 text-white shadow-lg",children:[(0,i.jsx)(x(),{src:s,alt:"".concat(a," ").concat(o," Icon"),width:24,height:24,className:"h-6 w-6",title:"".concat(a,"-").concat(o)}),(0,i.jsx)("span",{className:"cursor-default text-sm font-medium",children:r})]},t)})}):""]}),(0,i.jsxs)("div",{className:"flex flex-col items-end",children:[(0,i.jsxs)("div",{className:"max-w-fit grow",children:[d&&(0,i.jsx)("div",{children:(0,i.jsx)("a",{href:"https://themoviedb.org/".concat(N,"/").concat(d),target:"_blank",children:(0,i.jsx)(x(),{src:"".concat(S,"/icons_logos/tmdb_logo.svg"),alt:"TMDB Logo",width:128,height:32,className:"h-8 w-32 rounded-lg bg-black bg-opacity-70 p-2 shadow-lg"})})}),(0,i.jsx)("div",{children:(0,i.jsx)("a",{href:"https://app.plex.tv/desktop#!/server/".concat(v,"/details?key=%2Flibrary%2Fmetadata%2F").concat(o),target:"_blank",children:(0,i.jsx)(x(),{src:"".concat(S,"/icons_logos/plex_logo.svg"),alt:"Plex Logo",width:128,height:32,className:"mt-1 h-8 w-32 rounded-lg bg-black bg-opacity-70 p-1 shadow-lg"})})}),f&&(0,i.jsx)("div",{children:(0,i.jsx)("a",{href:"".concat(f,"/info?rating_key=").concat(o,"&source=history"),target:"_blank",children:(0,i.jsx)(x(),{src:"".concat(S,"/icons_logos/tautulli_logo.svg"),alt:"Plex Logo",width:128,height:32,className:"mt-1 h-8 w-32 rounded-lg bg-black bg-opacity-70 p-1.5 shadow-lg"})})})]}),(null==w?void 0:w.Genre)&&w.Genre.length>0?(0,i.jsx)("div",{className:"pointer-events-none flex flex-wrap-reverse items-end justify-end gap-1",children:w.Genre.map((e,t)=>(0,i.jsx)("span",{className:"flex items-center rounded-lg bg-black bg-opacity-70 p-2 text-xs font-medium text-white shadow-lg",children:e.tag},t))}):""]})]})]}),(0,i.jsxs)("div",{className:"p-4",children:[(0,i.jsx)("div",{className:"flex items-center justify-between border-b pb-4",children:(0,i.jsx)("div",{children:(0,i.jsxs)("h2",{className:"text-xl font-semibold text-gray-100",children:[c," (",r,")"]})})}),(0,i.jsx)("div",{className:"mt-2 text-gray-300",children:(0,i.jsx)("p",{children:s||"No summary available."})}),(0,i.jsxs)("div",{className:"mr-0.5 mt-6 flex flex-row items-center justify-between gap-4",children:[(null==w?void 0:w.Guid)&&["movie","show"].includes(a)&&w.Guid.length>0&&(0,i.jsxs)("div",{className:"flex flex-wrap items-center gap-1 text-xs text-zinc-400",children:[w.Guid.map((e,t)=>(0,i.jsx)("span",{className:"flex items-center justify-center rounded-lg bg-zinc-700 p-2 text-xs text-white shadow-lg",children:e.id},t)),"(Plex metadata IDs)"]}),(0,i.jsx)("div",{className:"ml-auto flex space-x-3",children:(0,i.jsx)("button",{onClick:l,className:"rounded bg-amber-600 px-4 py-2 hover:bg-amber-500 focus:outline-none",children:"Close"})})]})]})]})})});z.displayName="MediaModalContent";let I=(0,n.memo)(e=>{let{id:t,summary:l,year:a,mediaType:o,title:s,libraryId:r,type:u,collectionId:p=0,daysLeft:v=9999,exclusionId:g,tmdbid:f,userScore:w,canExpand:k=!1,collectionPage:S=!1,exclusionType:A,isManual:I=!1,onRemove:C=e=>{}}=e,E=(()=>{let{isTouch:e}=(0,n.useContext)(b);return e})(),[T,_]=(0,n.useState)(!1),[P,R]=(0,n.useState)(null),[D,L]=(0,n.useState)(!1),[M,O]=(0,n.useState)(!1),[F,B]=(0,n.useState)(!1),[H,G]=(0,n.useState)(!1);(0,n.useEffect)(()=>{f&&(0,h.Ay)("/moviedb/image/".concat(o,"/").concat(f)).then(e=>R(e)),W()},[]);let W=()=>{S||(0,h.Ay)("/rules/exclusion?plexId=".concat(t)).then(e=>e.length>0?B(!0):B(!1))};return a&&"episode"!==o&&(a=a.slice(0,4)),(0,i.jsxs)("div",{className:"w-full",children:[D?(0,i.jsx)(y,{plexId:t,...r?{libraryId:r}:{},...u?{type:u}:{},onSubmit:()=>{L(!1)},onCancel:()=>L(!1),modalType:"exclude"}):void 0,M?(0,i.jsx)(y,{plexId:t,...r?{libraryId:r}:{},...u?{type:u}:{},onSubmit:()=>{O(!1)},onCancel:()=>O(!1),modalType:"add"}):void 0,(0,i.jsx)("div",{className:"relative transform-gpu cursor-default overflow-hidden rounded-xl bg-zinc-800 bg-cover pb-[150%] outline-none ring-1 transition duration-300 ".concat(T?"scale-105 shadow-lg ring-zinc-500":"scale-100 shadow ring-zinc-700"),onMouseEnter:()=>!E&&_(!0),onMouseLeave:()=>_(!1),onClick:()=>T&&void G(!0),role:"link",tabIndex:0,children:(0,i.jsxs)("div",{className:"absolute inset-0 h-full w-full overflow-hidden",children:[P?(0,i.jsx)(x(),{className:"absolute inset-0 h-full w-full",alt:"",src:"https://image.tmdb.org/t/p/w300_and_h450_face".concat(P),fill:!0,sizes:"100vw",style:{objectFit:"cover"}}):void 0,(0,i.jsx)("div",{className:"absolute left-0 right-0 flex items-center justify-between p-2",children:(0,i.jsx)("div",{className:"pointer-events-none z-40 rounded-full shadow ".concat("movie"===o?"bg-zinc-900":"show"===o?"bg-amber-900":"season"===o?"bg-yellow-700":"bg-rose-900"),children:(0,i.jsx)("div",{className:"flex h-4 items-center px-2 py-2 text-center text-xs font-medium uppercase tracking-wider text-zinc-200 sm:h-5",children:o})})}),F&&!S?(0,i.jsx)("div",{className:"absolute right-0 flex items-center justify-between p-2",children:(0,i.jsx)("div",{className:"pointer-events-none z-40 rounded-full shadow ".concat("movie"===o?"bg-zinc-900":"show"===o?"bg-amber-900":"season"===o?"bg-yellow-700":"bg-rose-900"),children:(0,i.jsx)("div",{className:"flex h-4 items-center px-2 py-2 text-center text-xs font-medium uppercase tracking-wider text-zinc-200 sm:h-5",children:"EXCL"})})}):void 0,S&&I&&!T?(0,i.jsx)("div",{className:"absolute bottom-0 left-1/2 flex -translate-x-1/2 transform items-center justify-between p-2",children:(0,i.jsx)("div",{className:"pointer-events-none z-40 rounded-full shadow ".concat("movie"===o?"bg-zinc-900":"show"===o?"bg-amber-900":"season"===o?"bg-yellow-700":"bg-rose-900"),children:(0,i.jsx)("div",{className:"flex h-4 items-center px-2 py-2 text-center text-xs font-medium uppercase tracking-wider text-zinc-200 sm:h-5",children:"MANUAL"})})}):void 0,S&&!A&&9999!==v?(0,i.jsx)("div",{className:"absolute right-0 flex items-center justify-between p-2",children:(0,i.jsx)("div",{className:"pointer-events-none z-40 rounded-full shadow ".concat(v<0?"bg-red-700":"movie"===o?"bg-zinc-900":"show"===o?"bg-amber-900":"season"===o?"bg-yellow-700":"bg-rose-900"," "),children:(0,i.jsx)("div",{className:"flex h-4 items-center px-2 py-2 text-center text-xs font-medium uppercase tracking-wider text-zinc-200 sm:h-5",children:v})})}):void 0,S&&"global"===A?(0,i.jsx)("div",{className:"absolute right-0 flex items-center justify-between p-2",children:(0,i.jsx)("div",{className:"pointer-events-none z-40 rounded-full shadow ".concat("movie"===o?"bg-zinc-900":"show"===o?"bg-amber-900":"season"===o?"bg-yellow-700":"bg-rose-900"),children:(0,i.jsx)("div",{className:"flex h-4 items-center px-2 py-2 text-center text-xs font-medium uppercase tracking-wider text-zinc-200 sm:h-5",children:A.toUpperCase()})})}):void 0,(0,i.jsx)(c.e,{as:"div",show:!P||T,className:"absolute inset-0 transform cursor-alias overflow-hidden rounded-xl transition",enter:"opacity-0",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"opacity-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,i.jsx)("div",{className:"absolute inset-0 h-full w-full overflow-hidden text-left",style:{background:"linear-gradient(180deg, rgba(45, 55, 72, 0.4) 0%, rgba(45, 55, 72, 0.9) 100%)"},children:(0,i.jsx)("div",{className:"flex h-full w-full items-end",children:(0,i.jsxs)("div",{className:"w-full px-2 pb-1 text-zinc-200",children:[a&&(0,i.jsx)("div",{className:"text-sm font-medium",children:a}),(0,i.jsx)("h1",{className:"w-full whitespace-normal text-sm font-bold leading-tight",style:{WebkitLineClamp:3,display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical",wordBreak:"break-word"},children:s}),"episode"==o&&(0,i.jsx)("div",{className:"whitespace-normal text-xs",style:{WebkitLineClamp:5,display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical",wordBreak:"break-word"},children:l}),S?(0,i.jsx)(N,{plexId:t,popup:A&&"global"===A,onRemove:()=>C(t.toString()),collectionId:p,exclusionId:g}):(0,i.jsxs)("div",{children:[(0,i.jsxs)(j.A,{buttonType:"twin-primary-l",buttonSize:"md",className:"mb-1 mt-2 h-6 w-1/2 text-zinc-200 shadow-md",onClick:e=>{e.stopPropagation(),O(!0)},children:[(0,i.jsx)(d.A,{className:"m-auto ml-3 h-3"})," ",(0,i.jsx)("p",{className:"rules-button-text m-auto mr-2",children:"Add"})]}),(0,i.jsxs)(j.A,{buttonSize:"md",buttonType:"twin-primary-r",className:"mt-2 h-6 w-1/2",onClick:e=>{e.stopPropagation(),L(!0)},children:[(0,i.jsx)(m.A,{className:"m-auto ml-3 h-3"})," ",(0,i.jsx)("p",{className:"rules-button-text m-auto mr-2",children:"Excl"})]})]})]})})})})]})}),!M&&!D&&H&&(0,i.jsx)(z,{id:t,onClose:()=>G(!1),title:s,summary:l||"No description available.",mediaType:o,tmdbid:f,year:a,userScore:w})]})},(e,t)=>e.id===t.id),C=e=>{let t=()=>{!(window.innerHeight+document.documentElement.scrollTop>=.8*document.documentElement.scrollHeight)||e.extrasLoading||e.dataFinished||e.fetchData()};return((0,n.useEffect)(()=>{let e=s().debounce(t,200);return window.addEventListener("scroll",e,{passive:!0}),()=>{window.removeEventListener("scroll",e),e.cancel()}},[]),(0,n.useEffect)(()=>{!(window.innerHeight+document.documentElement.scrollTop>=.8*document.documentElement.scrollHeight)||e.loading||e.extrasLoading||e.dataFinished||e.fetchData()},[e.data]),e.loading)?(0,i.jsx)(r.A,{}):e.data&&e.data.length>0?(0,i.jsxs)("ul",{className:"cards-vertical",children:[e.data.map(t=>{var l,a,o,s,n,r,c;return(0,i.jsx)("li",{children:(0,i.jsx)(I,{id:+t.ratingKey,libraryId:e.libraryId,type:"movie"===t.type?1:"show"===t.type?2:"season"===t.type?3:4,image:"",summary:"movie"===t.type||"show"===t.type?t.summary:"season"===t.type?t.title:"episode"===t.type?"Episode "+t.index+" - "+t.title:"",year:"episode"===t.type?t.parentTitle:t.parentYear?t.parentYear.toString():null==(l=t.year)?void 0:l.toString(),mediaType:"movie"===t.type?"movie":"show"===t.type?"show":"season"===t.type?"season":"episode",title:t.grandparentTitle?t.grandparentTitle:t.parentTitle?t.parentTitle:t.title,userScore:t.audienceRating?t.audienceRating:0,exclusionId:t.maintainerrExclusionId?t.maintainerrExclusionId:void 0,tmdbid:t.parentData?null==(s=t.parentData.Guid)||null==(o=s.find(e=>{var t;return null==(t=e.id)?void 0:t.includes("tmdb")}))||null==(a=o.id)?void 0:a.split("tmdb://")[1]:t.Guid?null==(r=t.Guid.find(e=>{var t;return null==(t=e.id)?void 0:t.includes("tmdb")}))||null==(n=r.id)?void 0:n.split("tmdb://")[1]:void 0,collectionPage:!!e.collectionPage&&e.collectionPage,exclusionType:t.maintainerrExclusionType,onRemove:e.onRemove,collectionId:e.collectionId,isManual:!!t.maintainerrIsManual&&t.maintainerrIsManual,...e.collectionInfo?{daysLeft:(t=>{if(e.collectionInfo){let l=e.collectionInfo.find(e=>e.plexId===+t);if(l&&l.collection){if(null==l.collection.deleteAfterDays)return;let e=new Date(l.addDate),t=new Date;return e.setDate(e.getDate()+l.collection.deleteAfterDays),Math.ceil((e.getTime()-t.getTime())/864e5)}}})(+t.ratingKey),collectionId:null==(c=e.collectionInfo.find(e=>e.plexId===+t.ratingKey))?void 0:c.collectionId}:void 0})},+t.ratingKey)}),e.extrasLoading?(0,i.jsx)(r.r,{}):void 0]}):(0,i.jsx)(i.Fragment,{})}},36572:(e,t,l)=>{l.d(t,{A:()=>n});var a=l(37876),i=l(6555),o=l(1660),s=l(86054);l(14232);let n=e=>{let{title:t,children:l,type:n}=e,r={bgColor:"bg-zinc-800",titleColor:"text-zinc-100",textColor:"text-zinc-300",svg:(0,a.jsx)(i.A,{className:"h-5 w-5"})};switch(n){case"info":r={bgColor:"bg-zinc-800",titleColor:"text-zinc-100",textColor:"text-zinc-300",svg:(0,a.jsx)(o.A,{className:"h-5 w-5"})};break;case"error":r={bgColor:"bg-red-600",titleColor:"text-red-100",textColor:"text-red-300",svg:(0,a.jsx)(s.A,{className:"h-5 w-5"})}}return(0,a.jsx)("div",{className:"mb-4 rounded-md p-4 ".concat(r.bgColor),children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0 ".concat(r.titleColor),children:r.svg}),(0,a.jsxs)("div",{className:"ml-3",children:[t&&(0,a.jsx)("div",{className:"text-sm font-medium ".concat(r.titleColor),children:t}),l&&(0,a.jsx)("div",{className:"button-text mt-2 text-sm first:mt-0 ".concat(r.textColor),children:l})]})]})})}},46100:(e,t,l)=>{l.d(t,{A:()=>i});var a=l(37876);let i=l(14232).forwardRef(function(e,t){let{buttonType:l="default",buttonSize:i="default",as:o,children:s,className:n,...r}=e,c=["inline-flex items-center justify-center border border-transparent leading-5 font-medium focus:outline-none transition ease-in-out duration-150 cursor-pointer disabled:opacity-50 whitespace-nowrap"];switch(l){case"primary":c.push("text-white bg-amber-600 border-amber-600 hover:bg-amber-500 hover:border-amber-500 rounded-md focus:border-amber-700 focus:ring-amber active:bg-amber-700 active:border-amber-700");break;case"danger":c.push("text-white bg-red-600 border-red-600 hover:bg-red-500 hover:border-red-500 focus:border-red-700 rounded-md focus:ring-red active:bg-red-700 active:border-red-700");break;case"warning":c.push("text-white bg-zinc-800 border-zinc-800 hover:bg-zinc-600 hover:border-zinc-600 focus:border-zinc-700 rounded-md focus:ring-zinc active:bg-zinc-700 active:border-zinc-700");break;case"success":c.push("text-white bg-amber-900 border-amber-900 hover:bg-amber-700 hover:border-amber-700 focus:border-amber-700 rounded-md focus:ring-amber active:bg-amber-700 active:border-amber-700");break;case"ghost":c.push("text-white bg-transaprent border-zinc-600 hover:border-zinc-200 focus:border-zinc-100 rounded-md active:border-zinc-100");break;case"twin-primary-l":c.push("text-white bg-amber-600 border-amber-600 hover:bg-amber-500 hover:border-amber-500 focus:border-amber-700 focus:ring-amber active:bg-amber-700 active:border-amber-700 rounded-l");break;case"twin-primary-r":c.push("text-white bg-amber-600 border-amber-600 hover:bg-amber-500 hover:border-amber-500 focus:border-amber-700 focus:ring-amber active:bg-amber-700 active:border-amber-700 rounded-r");break;case"twin-secondary-l":c.push("text-white bg-amber-900 border-amber-900 hover:bg-amber-700 hover:border-amber-700 focus:border-amber-700 focus:ring-amber active:bg-amber-700 active:border-amber-700 rounded-l");break;case"twin-secondary-r":c.push("text-white bg-amber-900 border-amber-900 hover:bg-amber-700 hover:border-amber-700 focus:border-amber-700 focus:ring-amber active:bg-amber-700 active:border-amber-700 rounded-r");break;default:c.push("text-zinc-200 bg-zinc-600 border-zinc-600 hover:text-white hover:bg-zinc-500 hover:border-zinc-500 group-hover:text-white rounded-md group-hover:bg-zinc-500 group-hover:border-zinc-500 focus:border-amber-600 focus:ring-amber active:text-zinc-200 active:bg-zinc-500 active:border-zinc-500")}switch(i){case"sm":c.push("px-2.5 py-1.5 text-xs button-sm");break;case"lg":c.push("px-6 py-3 text-base button-lg");break;default:c.push("px-4 py-2 text-sm button-md")}return(c.push(null!=n?n:""),"a"===o)?(0,a.jsx)("a",{className:c.join(" "),...r,ref:t,children:(0,a.jsx)("span",{className:"flex items-center",children:s})}):(0,a.jsx)("button",{className:c.join(" "),...r,ref:t,children:(0,a.jsx)("span",{className:"flex items-center",children:s})})})},83247:(e,t,l)=>{l.d(t,{A:()=>i});var a=l(37876);let i=e=>(0,a.jsxs)("div",{className:"form-row",children:[(0,a.jsx)("label",{htmlFor:"".concat(e.htmlField?e.htmlField:e.label,"-field"),className:"text-label",children:e.label}),(0,a.jsx)("div",{className:"form-input",children:(0,a.jsx)("div",{className:"form-input-field",children:e.children})})]})},91710:(e,t,l)=>{l.d(t,{A:()=>n});var a=l(37876),i=l(14232),o=l(91104),s=l(41568);let n=e=>{let t=(0,i.useContext)(o.A);return(0,i.useEffect)(()=>{t.libraries.length<=0&&(0,s.Ay)("/plex/libraries").then(l=>{l?(t.addLibraries(l),void 0===e.allPossible||e.allPossible||e.onSwitch(+l[0].key)):t.addLibraries([])})},[]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"mb-5 w-full",children:(0,a.jsx)("form",{children:(0,a.jsxs)("select",{className:"border-zinc-600 hover:border-zinc-500 focus:border-zinc-500 focus:bg-opacity-100 focus:placeholder-zinc-400 focus:outline-none focus:ring-0",onChange:t=>{e.onSwitch(+t.target.value)},children:[void 0===e.allPossible||e.allPossible?(0,a.jsx)("option",{value:9999,children:"All"}):void 0,t.libraries.map(e=>(0,a.jsx)("option",{value:e.key,children:e.title},e.key))]})})})})}},94035:(e,t,l)=>{l.d(t,{R:()=>a});var a=function(e){return e[e.MOVIES=1]="MOVIES",e[e.SHOWS=2]="SHOWS",e[e.SEASONS=3]="SEASONS",e[e.EPISODES=4]="EPISODES",e}({})}}]);