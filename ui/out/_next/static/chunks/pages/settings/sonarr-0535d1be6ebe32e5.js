(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[747],{1660:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var l=s(14232);let a=l.forwardRef(function(e,t){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),l.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"}))})},6555:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var l=s(14232);let a=l.forwardRef(function(e,t){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),l.createElement("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"}))})},9542:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var l=s(14232);let a=l.forwardRef(function(e,t){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),l.createElement("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"}))})},12405:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/sonarr",function(){return s(69026)}])},31974:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var l=s(14232);let a=l.forwardRef(function(e,t){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),l.createElement("path",{fillRule:"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z",clipRule:"evenodd"}))})},36572:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var l=s(37876),a=s(6555),n=s(1660),r=s(86054);s(14232);let i=e=>{let{title:t,children:s,type:i}=e,o={bgColor:"bg-zinc-800",titleColor:"text-zinc-100",textColor:"text-zinc-300",svg:(0,l.jsx)(a.A,{className:"h-5 w-5"})};switch(i){case"info":o={bgColor:"bg-zinc-800",titleColor:"text-zinc-100",textColor:"text-zinc-300",svg:(0,l.jsx)(n.A,{className:"h-5 w-5"})};break;case"error":o={bgColor:"bg-red-600",titleColor:"text-red-100",textColor:"text-red-300",svg:(0,l.jsx)(r.A,{className:"h-5 w-5"})}}return(0,l.jsx)("div",{className:"mb-4 rounded-md p-4 ".concat(o.bgColor),children:(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("div",{className:"flex-shrink-0 ".concat(o.titleColor),children:o.svg}),(0,l.jsxs)("div",{className:"ml-3",children:[t&&(0,l.jsx)("div",{className:"text-sm font-medium ".concat(o.titleColor),children:t}),s&&(0,l.jsx)("div",{className:"button-text mt-2 text-sm first:mt-0 ".concat(o.textColor),children:s})]})]})})}},40556:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var l=s(14232);let a=l.forwardRef(function(e,t){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),l.createElement("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"}))})},55033:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var l=s(37876),a=s(9542),n=s(46100);let r=e=>(0,l.jsx)("span",{className:"inline-flex h-full w-full",children:(0,l.jsxs)(n.A,{buttonType:"default",type:"button",as:"a",target:"_blank",href:"https://docs.maintainerr.info/latest/".concat(e.page?e.page:""),rel:"noopener noreferrer",children:[(0,l.jsx)(a.A,{}),(0,l.jsx)("span",{children:e.text?e.text:"Docs"})]})})},69026:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var l=s(37876),a=s(12701),n=s(31974),r=s(95932),i=s(40556),o=s(14232),d=s(41568),c=s(46100),u=s(10291),m=s(10196),h=s(36572),x=s(55033),v=s(11684);let f=e=>{var t,s,a,n,r,i,c,u,f,g;let p=(null==(t=e.settings)?void 0:t.url)&&null!=(i=(0,m.EW)(e.settings.url))?i:"",j=(null==(s=e.settings)?void 0:s.url)&&null!=(c=(0,m.$_)(e.settings.url))?c:"",w=(null==(a=e.settings)?void 0:a.url)&&null!=(u=(0,m.pw)(e.settings.url))?u:"",N=null!=(f=null==(n=e.settings)?void 0:n.apiKey)?f:"",b=null!=(g=null==(r=e.settings)?void 0:r.serverName)?g:"",[y,A]=(0,o.useState)(p),[C,S]=(0,o.useState)(j),[z,k]=(0,o.useState)(w),[E,R]=(0,o.useState)(N),[_,T]=(0,o.useState)(b),[M,F]=(0,o.useState)(),[H,O]=(0,o.useState)(e.settings?{hostname:y,baseUrl:C,port:z,apiKey:E}:void 0),[B,L]=(0,o.useState)(!1),[U,V]=(0,o.useState)(),I=(y!=(null==H?void 0:H.hostname)||C!=(null==H?void 0:H.baseUrl)||z!=(null==H?void 0:H.port)||E!=(null==H?void 0:H.apiKey))&&!(null==U?void 0:U.status),D=e=>{let t=y.includes("http://")||y.includes("https://")?y:"443"==e?"https://"+y:"http://"+y,s="".concat((0,m.jq)(t,+e));return s.endsWith("/")?s.slice(0,-1):s},K=()=>{if(!z&&y){let e=y.includes("http://")?"80":y.includes("https://")?"443":"80";if(e)return k(e.toString()),e}return z},P=async()=>{let t=K(),s=D(t);if(y&&t&&E&&_){var l,a,n,r,i;let t={url:"".concat(s).concat(C?"/".concat(C):""),apiKey:E,serverName:_,...(null==(l=e.settings)?void 0:l.id)&&{id:null==(a=e.settings)?void 0:a.id}};(null==(n=e.settings)?void 0:n.id)&&(t.id=e.settings.id);let o=(null==(r=e.settings)?void 0:r.id)?"/settings/sonarr/".concat(e.settings.id):"/settings/sonarr",c=(null==(i=e.settings)?void 0:i.id)?d.gi:d.vI,u=await c(o,t);1==u.code?(e.onUpdate(u.data),F(!1)):F(!0)}else F(!0)},q=async()=>{if(B)return;L(!0);let e=K(),t=D(e);await (0,d.vI)("/settings/test/sonarr",{apiKey:E,url:"".concat(t).concat(C?"/".concat(C):"")}).then(t=>{V({status:1==t.code,version:t.message}),1==t.code&&O({hostname:y,baseUrl:C,port:e,apiKey:E}),L(!1)}).catch(e=>{V({status:!1,version:"0"})}).finally(()=>{L(!1)})};return(0,l.jsxs)(v.A,{loading:!1,backgroundClickable:!1,onCancel:()=>{e.onCancel()},onOk:P,okText:"Save Changes",okButtonType:"primary",okDisabled:I,secondaryButtonType:"success",secondaryText:B?"Testing...":"Test",secondaryDisabled:B,onSecondary:q,title:"Sonarr Settings",iconSvg:"",children:[M&&(0,l.jsx)(h.A,{type:"warning",title:"Not all fields contain values"}),null!=U?(null==U?void 0:U.status)?(0,l.jsx)(h.A,{type:"info",title:"Successfully connected to Sonarr (".concat(U.version,")")}):(0,l.jsx)(h.A,{type:"error",title:U.version||"Failed to connect to Sonarr"}):void 0,(0,l.jsxs)("div",{className:"form-row",children:[(0,l.jsx)("label",{htmlFor:"serverName",className:"text-label",children:"Server Name"}),(0,l.jsx)("div",{className:"form-input",children:(0,l.jsx)("div",{className:"form-input-field",children:(0,l.jsx)("input",{name:"serverName",id:"serverName",type:"text",value:_,onChange:e=>T(e.target.value)})})})]}),(0,l.jsxs)("div",{className:"form-row",children:[(0,l.jsx)("label",{htmlFor:"hostname",className:"text-label",children:"Hostname or IP"}),(0,l.jsx)("div",{className:"form-input",children:(0,l.jsx)("div",{className:"form-input-field",children:(0,l.jsx)("input",{name:"hostname",id:"hostname",type:"text",value:y,onChange:e=>A(e.target.value)})})})]}),(0,l.jsxs)("div",{className:"form-row",children:[(0,l.jsx)("label",{htmlFor:"port",className:"text-label",children:"Port"}),(0,l.jsx)("div",{className:"form-input",children:(0,l.jsx)("div",{className:"form-input-field",children:(0,l.jsx)("input",{name:"port",id:"port",type:"number",value:z,onChange:e=>k(e.target.value)})})})]}),(0,l.jsxs)("div",{className:"form-row",children:[(0,l.jsxs)("label",{htmlFor:"baseUrl",className:"text-label",children:["Base URL",(0,l.jsx)("span",{className:"label-tip",children:"No Leading Slash"})]}),(0,l.jsx)("div",{className:"form-input",children:(0,l.jsx)("div",{className:"form-input-field",children:(0,l.jsx)("input",{name:"baseUrl",id:"baseUrl",type:"text",value:C,onChange:e=>S(e.target.value)})})})]}),(0,l.jsxs)("div",{className:"form-row",children:[(0,l.jsx)("label",{htmlFor:"apikey",className:"text-label",children:"Api key"}),(0,l.jsx)("div",{className:"form-input",children:(0,l.jsx)("div",{className:"form-input-field",children:(0,l.jsx)("input",{name:"apikey",id:"apikey",type:"password",value:E,onChange:e=>R(e.target.value)})})})]}),(0,l.jsx)("div",{className:"actions mt-5 w-full",children:(0,l.jsx)("div",{className:"flex w-full flex-wrap sm:flex-nowrap",children:(0,l.jsx)("span",{className:"m-auto rounded-md shadow-sm sm:ml-3 sm:mr-auto",children:(0,l.jsx)(x.A,{page:"Configuration/#sonarr"})})})})]})},g=e=>{let{onDeleteRequested:t}=e,[s,a]=(0,o.useState)(!1);return(0,l.jsxs)(c.A,{buttonSize:"md",buttonType:"twin-secondary-r",className:"h-10 w-1/2",onClick:()=>{s?(t(),a(!1)):a(!0)},children:[(0,l.jsx)(i.A,{className:"m-auto"})," ",(0,l.jsx)("p",{className:"m-auto font-semibold",children:s?(0,l.jsx)(l.Fragment,{children:"Are you sure?"}):(0,l.jsx)(l.Fragment,{children:"Delete"})})]})},p=()=>{let[e,t]=(0,o.useState)(!1),[s,a]=(0,o.useState)([]),[i,m]=(0,o.useState)(),[h,x]=(0,o.useState)();return((0,o.useEffect)(()=>{e||(0,d.Ay)("/settings/sonarr").then(e=>{a(e),t(!0)})},[]),(0,o.useEffect)(()=>{document.title="Maintainerr - Settings - Sonarr"},[]),e)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"h-full w-full",children:[(0,l.jsxs)("div",{className:"section h-full w-full",children:[(0,l.jsx)("h3",{className:"heading",children:"Sonarr Settings"}),(0,l.jsx)("p",{className:"description",children:"Sonarr configuration"})]}),(0,l.jsxs)("ul",{className:"grid max-w-6xl grid-cols-1 gap-6 lg:grid-cols-2 xl:grid-cols-3",children:[s.map(e=>(0,l.jsxs)("li",{className:"h-full rounded-xl bg-zinc-800 p-4 text-zinc-400 shadow ring-1 ring-zinc-700",children:[(0,l.jsx)("div",{className:"mb-2 flex items-center gap-x-3 text-base font-medium text-white sm:text-lg",children:e.serverName}),(0,l.jsxs)("p",{className:"mb-4 space-x-2 truncate text-gray-300",children:[(0,l.jsx)("span",{className:"font-semibold",children:"Address"}),(0,l.jsx)("a",{href:e.url,className:"hover:underline",children:e.url})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)(c.A,{buttonType:"twin-primary-l",buttonSize:"md",className:"h-10 w-1/2",onClick:()=>{m(e)},children:[(0,l.jsx)(n.A,{className:"m-auto"})," ",(0,l.jsx)("p",{className:"m-auto font-semibold",children:"Edit"})]}),(0,l.jsx)(g,{onDeleteRequested:()=>(e=>{(0,d.su)("/settings/sonarr/".concat(e)).then(t=>{var l;1===t.code?a(s.filter(t=>t.id!==e)):(null==(l=t.data)?void 0:l.collectionsInUse)&&x(t.data.collectionsInUse)}).catch(e=>{console.log(e)})})(e.id)})]})]},e.id)),(0,l.jsx)("li",{className:"flex h-full items-center justify-center rounded-xl border-2 border-dashed border-gray-400 bg-zinc-800 p-4 text-zinc-400 shadow",children:(0,l.jsxs)("button",{type:"button",className:"add-button m-auto flex h-9 rounded bg-amber-600 px-4 text-zinc-200 shadow-md hover:bg-amber-500",onClick:()=>{m(!0)},children:[(0,l.jsx)(r.A,{className:"m-auto h-5"}),(0,l.jsx)("p",{className:"m-auto ml-1 font-semibold",children:"Add server"})]})})]})]}),i&&(0,l.jsx)(f,{settings:"boolean"==typeof i?void 0:i,onUpdate:e=>{let t=[...s],l=t.findIndex(t=>t.id===e.id);-1!==l?t[l]=e:t.push(e),a(t),m(void 0)},onCancel:()=>{m(void 0)}}),h?(0,l.jsxs)(v.A,{title:"Server in-use",size:"sm",onOk:()=>x(void 0),children:[(0,l.jsxs)("p",{className:"mb-4",children:["This server is currently being used by the following rules:",(0,l.jsx)("ul",{className:"list-inside list-disc",children:h.map(e=>(0,l.jsx)("li",{children:e.title},e.id))})]}),(0,l.jsx)("p",{children:"You must re-assign these rules to a different server before deleting."})]}):void 0]}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"mt-6",children:(0,l.jsx)(u.A,{})})})},j=()=>(0,l.jsx)(a.A,{children:(0,l.jsx)(p,{})})},86054:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var l=s(14232);let a=l.forwardRef(function(e,t){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),l.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))})}},e=>{e.O(0,[572,636,593,792],()=>e(e.s=12405)),_N_E=e.O()}]);